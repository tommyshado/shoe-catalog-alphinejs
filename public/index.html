<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>

      <!-- cdn script tags -->
      <script src="//unpkg.com/alpinejs" defer></script>
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      <script src="https://cdn.tailwindcss.com"></script>
      
    </head> 
    
    <body x-data="catalog">
      
      <!-- navbar section -->
      <nav class="bg-[#f6f6f6] py-4 flex justify-between items-center">
        <h1 class="text-3xl lg:text-4xl"><strong>Shesha footwear store</strong></h1>

        <ul class="flex space-x-4">
          <li><a class="text-1xl lg:text-2xl" x-show="!loggedIn" href="login.html">Login</a></li>
          <li><a class="text-1xl lg:text-2xl" x-show="!loggedIn" href="signup.html">Signup</a></li>
          <li style="margin-right: 2rem;">
            <button class="text-1xl lg:text-2xl" x-show="loggedIn" @click="logout()">
              logout
            </button>
          </li>
        </ul>
      </nav>
  
      <!-- message section -->
      <div class="errorMsg flex justify-center items-center"></div>
      <div class="payment flex justify-center items-center"></div>
    
      <!-- shopping cart section -->
      <div class="bg-[#f6f6f6]" x-show="total > 0 && !createShoe">

        <h2 class="flex justify-center items-center"><strong>Your Cart</strong></h2>

        <div class="flex justify-center items-center">
          <div class="cartSection">
            <table class="table-auto">
              <tr>
                <th>Product</th>
                <th>Increase</th>
                <th>Decrease</th>
                <th>Quantity</th>
                <th>Subtotal</th>
                <th>Remove</th>
              </tr>
              
              <template x-for="shoe in cart">
                <tr>
                    <td x-text="shoe.description"></td>
                    <td>
                        <button @click="addShoeToCart(shoe.shoe_id)">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="30"
                            height="30"
                            fill="currentColor"
                            class="bi bi-plus-lg"
                            viewBox="0 0 16 16"
                          >
                            <path
                              fill-rule="evenodd"
                              d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"
                            />
                          </svg>
                        </button>
                    </td>
                    <td>
                        <button @click="decrementShoeQty(shoe.shoe_id)">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="30"
                            height="30"
                            fill="currentColor"
                            class="bi bi-dash"
                            viewBox="0 0 16 16"
                          >
                            <path
                              d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"
                            />
                          </svg>
                        </button>
                    </td>
                    <td x-text="shoe.quantity"></td>
                    <td x-text="'R' + ' ' + shoe.total"></td>
                    <td>
                      <button @click="removeShoeFromCart(shoe.shoe_id)" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                          <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
                        </svg>
                      </button>
                    </td>
                  </tr>
              </template>

            </table>

          </div>

          <!-- payment section -->
          <div class="paymentSection">
            <!-- cart total -->
            <strong><span>Total </span></strong><label x-text="'R ' + total"></label><br>

            <strong>
              <span>Payment here: </span>
            </strong>
            <input x-model="cartPay" name="payment" type="number"><br>

            <strong>
              <button x-on:click="proceed = confirm('Press OK to proceed or CANCEL to abort.')" class="bg-[#fb953e] text-[#fff] hover:bg-[#fa6300] px-10 rounded-full" type="submit" @click="paymentForCart()">
                pay
              </button>
            </strong>
          </div>

        </div>
      </div>

      <!-- creating a shoe and purchases history sections -->
      <div class="flex justify-center items-center" x-show="createShoe">

        <!-- loop over the length of the shoes purchases from localStorage then... -->
        <div class="shoePurchases">
          <table>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Date</th>
              <th>Sub total</th>
            </tr>

            <!-- display the shoes -->
            <tr>
              <td>Air Jordan 1</td>
              <td>2</td>
              <td>Nov 3 2023</td>
              <td>R 2500</td>
            </tr>
            
            <span>Total: </span>
            <span>R 2500</span>
          </table>

        </div>
  
        <div class="shoeForm">
          <label for="shoeName">
            <strong>
              Add a shoe to the catalog
            </strong>
          </label>
    
          <div>
            <div class="py-2">
              <label for="shoeName">Name of the shoe</label>
              <div>
                <input
                  x-model="shoe.shoeName"
                  class="focus:bg-white rounded-md border-2"
                  name="shoeName"
                  type="text"
                  placeholder="enter shoe name"
                  required
                />
              </div>
            </div>
    
            <div class="py-2">
              <label for="description">Shoe description</label>
              <div>
                <input
                  x-model="shoe.description"
                  class="focus:bg-white rounded-md border-2"
                  name="description"
                  type="text"
                  placeholder="enter image description"
                  required
                />
              </div>
            </div>
    
            <div class="py-2">
              <label for="ageGroup">Catagory</label>
              <div>
                <input
                  x-model="shoe.ageGroup"
                  class="focus:bg-white rounded-md border-2"
                  name="ageGroup"
                  type="text"
                  placeholder="enter men, women or kid"
                  required
                />
              </div>
            </div>
    
            <div class="py-2">
              <label for="image">Shoe image</label>
              <div>
                <input
                  x-model="shoe.image"
                  class="focus:bg-white rounded-md border-2"
                  name="image"
                  type="text"
                  placeholder="enter image url"
                  required
                />
              </div>
            </div>
    
            <div class="py-2">
              <label for="qty">Shoe quantity</label>
              <div>
                <input
                  x-model="shoe.qty"
                  class="focus:bg-white rounded-md border-2"
                  name="qty"
                  type="number"
                  placeholder="enter number of stock"
                  required
                />
              </div>
            </div>
    
            <div class="py-2">
              <label for="shoePrice">Price of the shoe</label>
              <div>
                <input
                x-model="shoe.shoePrice"
                  class="focus:bg-white rounded-md border-2"
                  name="shoePrice"
                  type="number"
                  placeholder="enter a shoe price"
                  required
                />
              </div>
            </div>
    
            <div class="py-2">
              <label for="shoeColor">Color of the shoe</label>
              <div>
                <input
                  x-model="shoe.shoeColor"
                  class="focus:bg-white rounded-md border-2"
                  name="shoeColor"
                  type="text"
                  placeholder="enter a shoe color"
                  required
                />
              </div>
            </div>
    
            <div class="py-2">
              <label for="shoeSize">Size of the shoe</label>
              <div>
                <input
                  x-model="shoe.shoeSize"
                  class="focus:bg-white rounded-md border-2"
                  name="shoeSize"
                  type="number"
                  placeholder="enter a shoe size"
                  required
                />
              </div>
            </div>
          </div>

          <div class="flex justify-center items-center">
            <button class="bg-[#fb953e] text-[#fff] hover:bg-[#fa6300] px-4 rounded-full" @click="showShoe()" type="submit">
              <strong>
                Add shoe
              </strong>
            </button>
          </div>
        </div>
    
      </div>

      <!-- shoes section -->
      <div class="shoe justify-center items-center grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <template x-for="shoe in shoes">
            <ul style="margin-left: 2rem;" class="card w-full max-w-sm rounded-md overflow-hidden shadow-lg m-1 content-center">
              <li><img x-bind:src="shoe.image" alt="shoe" srcset=""></li>
              <strong><li x-text="'Brand: ' + shoe.shoe_name"></li></strong>
              <strong><li x-text="'Description: ' + shoe.description"></li></strong>
              <li x-text="'Quantity: ' + shoe.shoe_qty"></li>
              <li x-text="'R ' + shoe.shoe_price"></li>
              <li class="flex justify-center items-center"><button class="bg-[#fb953e] text-[#fff] hover:bg-[#fa6300] m-2 px-4 rounded-full" x-show="!createShoe" @click="addShoeToCart(shoe.shoe_id)"><strong>Quick Add+</strong></button></li>
              <span class="flex justify-center items-center">
                <li><button x-on:click="proceed = confirm('Press OK to proceed or CANCEL to abort.')" style="margin-right: 1rem;" class="bg-[#fb953e] text-[#fff] hover:bg-[#fa6300] m-2 px-4 rounded-full" x-show="createShoe" @click="increaseShoeQty(shoe.shoe_id)"><strong>Add Qty+</strong></button></li>
                <li><button x-on:click="proceed = confirm('Press OK to proceed or CANCEL to abort.')" class="bg-[#fb953e] text-[#fff] hover:bg-[#fa6300] m-2 px-4 rounded-full" x-show="createShoe" @click="removeShoeInDispay(shoe.shoe_id)"><strong>Remove-</strong></button></li>
              </span>
            </ul>
        </template>
      </div>

    </body>

    <!-- script tags -->
    <script src="../JavaScript/shoeCatalog.js"></script>
</html>
